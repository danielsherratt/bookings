<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link href="https://fonts.googleapis.com/css2?family=Work+Sans:wght@300;400;600&display=swap" rel="stylesheet">
  <link rel="icon" href="assets/favicon.ico" type="image/x-icon">
  <link href="css/styles.css" rel="stylesheet"/>
  <title>NZSL Bookings Dashboard</title>

  <script>
  // Fetch admin‐set preferences and apply
  (async function() {
    try {
      const res = await fetch('/api/preferences');
      if (!res.ok) return;
      const { staff_classification, primary_color, secondary_color } = await res.json();

      // 1) Set CSS variables
      document.documentElement.style.setProperty('--primary-color', primary_color);
      document.documentElement.style.setProperty('--secondary-color', secondary_color);

      // 2) Update the main heading
      const header = document.getElementById('booking-header');      
      const available = document.getElementById('available-header');
      if (header) header.textContent = `Book a ${staff_classification}`;
      if (available) available.textContent = `Available ${staff_classification}`;

     
    } catch (e) {
      console.error('Could not load preferences', e);
    }
  })();
  </script>
</head>
<body>
  <div class="container">

    <!-- Logo -->
    <div class="logo">
      <img src="/logo.png" alt="Your Logo">
    </div>

    <!-- Dynamic heading -->
    <h1 id="booking-header">Book a Teacher</h1>

    <label for="type">Booking Type:</label>
    <select id="type">
      <option value="zoom">Zoom Session (30m)</option>
      <option value="inperson">Teacher (4h)</option>
    </select>

    <!-- Zoom controls -->
    <div id="zoom-controls">
      <label for="day">Day:</label>
      <select id="day">
        <option value="1">Monday</option>
        <option value="2">Tuesday</option>
        <option value="3">Wednesday</option>
        <option value="4">Thursday</option>
        <option value="5">Friday</option>
      </select>

      <label for="time">Time:</label>
      <select id="time"></select>
    </div>

    <!-- In Person controls -->
    <div id="inperson-controls" style="display:none;">
      <label for="day2">Day:</label>
      <select id="day2">
        <option value="1">Monday</option>
        <option value="2">Tuesday</option>
        <option value="3">Wednesday</option>
        <option value="4">Thursday</option>
        <option value="5">Friday</option>
      </select>

      <label for="slot-select">Slot:</label>
      <select id="slot-select">
        <option value="am">AM (08:30–12:30)</option>
        <option value="pm">PM (12:30–16:30)</option>
      </select>

      <label for="location-select">Location:</label>
      <select id="location-select"></select>
    </div>


    <h2 id="available-heading" style="display:none;">Available Teachers</h2>
    <div id="results"></div>

    <!-- Booking form -->
    <div id="booking-form" style="display:none;">
      <h2>Confirm Booking with <span id="teacher-name"></span></h2>
      <form id="form">
        <input name="parent_name"  type="text"  placeholder="Parent Name"   required><br>
        <input name="parent_email" type="email" placeholder="Parent Email"  required><br>
        <input name="student_name" type="text"  placeholder="Student Name"  required><br>
        <input name="school_name"  type="text"  placeholder="School Name"   required><br>
        <button type="submit">Book</button>
      </form>
    </div>

    <!-- Confirmation popup -->
    <div id="confirmation-popup" class="modal" style="display:none;">
      <div class="modal-content">
        <button class="close-btn">&times;</button>
        <p>Booking created successfully!</p>
      </div>
    </div>

  </div>

  <script src="js/booking.js"></script>
</body>
</html>
